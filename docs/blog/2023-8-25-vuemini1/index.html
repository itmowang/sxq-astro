<!DOCTYPE html><html lang="en"><head><!-- Global Metadata --><meta charset="utf-8"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><meta name="viewport" content="width=device-width"><meta name="generator" content="Astro v3.0.5"><title> Vue3源码学习 - 1.搭建项目雏形 - 魔王の博客 </title><!-- Canonical URL --><!-- Primary Meta Tags --><title> Vue3源码学习 - 1.搭建项目雏形 - 魔王の博客 </title><meta name="title" content=" Vue3源码学习 - 1.搭建项目雏形 - 魔王の博客 "><meta name="description" content="Welcome to my website!"><!-- Open Graph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="https://blog2.loli.wang/blog/2023-8-25-vuemini1/"><meta property="og:title" content=" Vue3源码学习 - 1.搭建项目雏形 - 魔王の博客 "><meta property="og:description" content="Welcome to my website!"><meta property="og:image" content="https://blog2.loli.wang/placeholder-social.jpg"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://blog2.loli.wang/blog/2023-8-25-vuemini1/"><meta property="twitter:title" content=" Vue3源码学习 - 1.搭建项目雏形 - 魔王の博客 "><meta property="twitter:description" content="Welcome to my website!"><meta property="twitter:image" content="https://blog2.loli.wang/placeholder-social.jpg"><link rel="stylesheet" href="/_astro/about.7dacdf6a.css" />
<style type="text/css">body{cursor:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAAEEfUpiAAAAAXNSR0IArs4c6QAAArtJREFUWAntV01rGlEUHWuibcU2TVPTRonJpiL2a1FbaEtpAvobanGnIK4qKQjuhP4GseDWjYuii9CNiyJCN134segiJGlAcKELQWJDFZmeM+0TDRM/ppVuvHCceXfuPXPvfe/dN0qSmmxvb8vn9cvnFWPGFouF/pcHJjIEA/1AoXoTjUZpdfGbyFssFuVAIDDKP0Q34R1DlppuN/D+t+M87Qyy0Wh8VjO6RKVer5cymcyrXq/XUjPahPIxQOMlNQOdmvLf6wxI9SloNVdUKYXb7ZYPDg4+gMgwbYwiQRKcCCedTicdHh4emc3mB9D9EPpxVyWCVqvVgNET4CHwHHADJmCirMDiHnB1ouXCQLUCunq9/gZPrqg+nUK5zN7Rbre7sOVsiLUxhetvEwMJuCmPj4/ZNdYAZR9OyzAgIEmhUJB3d3fts5CMEJAklUrJ8Xicm3zi5hrpAHCUut2uVCqVpEgk8nV9ff1FOBz+AiKmdqEoEfh8PtnpdL6G1X2Ae+AlwFQmikKQTqeTsBQFZOiMbmIKZF8yGo13cbUBM1WfzkL4Js3OgmRx1ViB4XnmLvxvM8FAVrCpe/1+/zSfz7O/XAO4GGduD/CZWXiQbYq2srOzw/O+Xy6X30O/CvALZq6BMAC7CIAdhXC5XHKlUpFrtdrHra2t27AxAnOZJtUARCA2m03OZrMyDt5SMBh0Igi2/+H1g6E2mSobtshQKCQ5HI5H+Jb9dnZ2dpRIJNjteOr/VSBiXlmBO5iCE/RgJZVYLCZ5vd5KMpncR5u9brVa1/7I6g2IyWQy5HK5d36//xMcToGxPVshHfMzmAKPxyM3m82fOAj2YM/efhNgpmaAhyZbNqO8BVA3cqhgrEm4yjc6nc73arW6j/tnHANzW3TgVkRMAdcCM+H/DOr4iUD0gYUsKrCowFwr8AukF+p8blYsTwAAAABJRU5ErkJggg==),default;font-family:Regular}@font-face{font-family:Regular;src:url(/_astro/Regular.fa2d9585.ttf) format("truetype")}.text-shadow{text-shadow:0 .1875rem .3125rem #1c1f21}.waves{position:relative;width:100%;height:10vh;margin-bottom:-7px;min-height:80px;max-height:150px}.waves .content{position:relative;height:10vh;text-align:center;background-color:#fff}.waves .content a{margin:0 5px;font-size:12px;color:#333}.waves .content a:hover{color:#000}.waves .parallax>use{animation:move-forever 25s cubic-bezier(.55,.5,.45,.5) infinite}.waves .parallax>use:nth-child(1){animation-delay:-2s;animation-duration:7s}.waves .parallax>use:nth-child(2){animation-delay:-3s;animation-duration:10s}.waves .parallax>use:nth-child(3){animation-delay:-4s;animation-duration:13s}.waves .parallax>use:nth-child(4){animation-delay:-5s;animation-duration:20s}@keyframes move-forever{0%{transform:translate3d(-90px,0,0)}to{transform:translate3d(85px,0,0)}}@media (max-width: 768px){.waves .waves{height:40px;min-height:40px}.waves .content{height:30vh}.waves h1{font-size:24px}}::-webkit-scrollbar{width:7px;height:7px}::-webkit-scrollbar-thumb{background-color:#14bae4;border-radius:4px}::-webkit-scrollbar-track{-webkit-box-shadow:inset 0 0 5px rgba(0,0,0,.2);background:#f6f6f6}.svg-icon{width:25px;height:25px}
</style><script type="module" src="/_astro/hoisted.5d947301.js"></script></head><body><div class="h-screen"><div id="nav" class="z-50 h-16 w-full backdrop-blur-sm bg-white/30 dark:bg-black/30 flex items-center px-4 justify-center fixed transition duration-500 ease-in-out"><div class="container flex justify-between hidden md:flex"><div class="flex items-center"><div class="mr-4"><a href="/" title="魔王の博客"><img src="/_astro/logo.554f37e0.png" class="w-[150px] h-[40px]"></a></div><div class="flex dark:text-white"><div class="mr-4 cursor-pointer hover:text-sky-300 transition ease-in-out delay duration-300 flex items-center"><svg class="icon w-[20px] h-[20px] mr-2" aria-hidden="true"><use  xlink:href="#blog-baozi-01"></use></svg> <a href="/" title="Home"> Home </a></div><div class="mr-4 cursor-pointer hover:text-sky-300 transition ease-in-out delay duration-300 flex items-center"><svg class="icon w-[20px] h-[20px] mr-2" aria-hidden="true"><use  xlink:href="#blog-take-01"></use></svg> <a href="/archive" title="Archive"> Archive </a></div><div class="mr-4 cursor-pointer hover:text-sky-300 transition ease-in-out delay duration-300 flex items-center"><svg class="icon w-[20px] h-[20px] mr-2" aria-hidden="true"><use  xlink:href="#blog-shousi-01"></use></svg> <a href="/about" title="About"> About </a></div></div></div><div class="flex items-center"><i class="iconfont blog-icon-test1 dark:text-white" style="font-size:26px"></i></div></div><div class="flex container justify-between items-center md:hidden"><div><i class="iconfont blog-icon-test2 dark:text-white" style="font-size:26px;"></i></div><div class="flex items-center"><div class="mr-4"><img src="/_astro/logo.554f37e0.png" class="w-[150px] h-[40px]"></div></div><div><i class="iconfont blog-icon-test1 dark:text-white" style="font-size:26px"></i></div></div></div><div class="h-2/4 w-full relative z-5"><div class="absolute inset-0 bg-black/50 opacity-50 z-5"></div><img src="/_astro/topimg.af50b3d3.jpg" class="h-full w-full object-cover"><!-- 标题 时间 作者信息啥的 --><div class="absolute inset-0 flex flex-col justify-center items-center"><div class="text-white text-center text-4xl font-semibold text-shadow tracking-widest"> Vue3源码学习 - 1.搭建项目雏形 - 魔王の博客</div><div class="flex text-white mt-4"><div class="mx-2 text-shadow font-semibold">Vue3源码学习 - 1.搭建项目雏形</div><!-- <div class="mx-2 text-shadow font-semibold">2021年06月18日</div>
      <div class="mx-2 text-shadow font-semibold">1,628阅读</div>
      <div class="mx-2 text-shadow font-semibold">21评论</div>
      <div class="mx-2 text-shadow font-semibold">43点赞</div> --></div></div><!--  云朵波浪 --><div class="absolute bottom-0 w-full"><svg id="wavesSvg" class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"></path></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0" fill="rgba(255,255,255,0.7)"></use><use xlink:href="#gentle-wave" x="48" y="3" fill="rgba(255,255,255,0.5)"></use><use xlink:href="#gentle-wave" x="48" y="5" fill="rgba(255,255,255,0.3)"></use><use xlink:href="#gentle-wave" x="48" y="2" fill="rgba(255,255,255,0.2)"></use></g></svg></div></div><div id="contextAs" class="pb-6 bg-cover bg-white  dark:text-white dark:bg-darkBg1 relative" style="background-image: url(/_astro/bg.0f3c96dc.jpeg)"><div class=" flex justify-center pt-4 min-h-[50vh]"><div class="container bg-white dark:bg-darkBg2 dark:text-white  text-red shadow rounded-md p-4 content"><h1 id="vue3-源码准备">Vue3 源码准备</h1>
<p>项目项目源码地址：<a href="https://github.com/itmowang/mini-vue">itmowang/mini-vue</a></p>
<h3 id="项目所用包管理工具请一切使用-pnpm">项目所用包管理工具请一切使用 PNPM</h3>
<pre is:raw="" class="astro-code dracula" style="background-color: #282A36; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #50FA7B">npm</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">install</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">pnpm</span><span style="color: #F8F8F2"> </span><span style="color: #BD93F9">-g</span></span></code></pre>
<h3 id="项目目录结构">项目目录结构</h3>
<pre is:raw="" class="astro-code dracula" style="background-color: #282A36; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #50FA7B">packages/</span><span style="color: #F8F8F2"> </span></span>
<span class="line"><span style="color: #50FA7B">┣</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">compiler-core/</span><span style="color: #F8F8F2">  </span><span style="color: #6272A4"># 编译器核心模块</span></span>
<span class="line"><span style="color: #50FA7B">┃</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">┣</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">src/</span></span>
<span class="line"><span style="color: #50FA7B">┃</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">┃</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">┗</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">index.ts</span></span>
<span class="line"><span style="color: #50FA7B">┃</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">┗</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">README.md</span></span>
<span class="line"><span style="color: #50FA7B">┣</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">compoler-dom/</span><span style="color: #F8F8F2">  </span><span style="color: #6272A4"># 浏览器部分编译模块</span></span>
<span class="line"><span style="color: #50FA7B">┃</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">┣</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">src/</span></span>
<span class="line"><span style="color: #50FA7B">┃</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">┃</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">┗</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">index.ts</span></span>
<span class="line"><span style="color: #50FA7B">┃</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">┗</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">README.md</span></span>
<span class="line"><span style="color: #50FA7B">┣</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">reactivity/</span><span style="color: #F8F8F2">    </span><span style="color: #6272A4"># 响应性模块</span></span>
<span class="line"><span style="color: #50FA7B">┃</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">┣</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">src/</span></span>
<span class="line"><span style="color: #50FA7B">┃</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">┃</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">┗</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">index.ts</span></span>
<span class="line"><span style="color: #50FA7B">┃</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">┗</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">README.md</span></span>
<span class="line"><span style="color: #50FA7B">┣</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">runtime-core/</span><span style="color: #F8F8F2">  </span><span style="color: #6272A4"># 运行时核心模块</span></span>
<span class="line"><span style="color: #50FA7B">┃</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">┣</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">src/</span></span>
<span class="line"><span style="color: #50FA7B">┃</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">┃</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">┗</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">index.ts</span></span>
<span class="line"><span style="color: #50FA7B">┃</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">┗</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">README.md</span></span>
<span class="line"><span style="color: #50FA7B">┣</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">runtime-dom/</span><span style="color: #F8F8F2">   </span><span style="color: #6272A4"># 浏览器部分运行时模块</span></span>
<span class="line"><span style="color: #50FA7B">┃</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">┣</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">src/</span></span>
<span class="line"><span style="color: #50FA7B">┃</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">┃</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">┗</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">index.ts</span></span>
<span class="line"><span style="color: #50FA7B">┃</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">┗</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">README.md</span></span>
<span class="line"><span style="color: #50FA7B">┣</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">shared/</span><span style="color: #F8F8F2">        </span><span style="color: #6272A4"># 共享公共方法模块</span></span>
<span class="line"><span style="color: #50FA7B">┃</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">┣</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">src/</span></span>
<span class="line"><span style="color: #50FA7B">┃</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">┃</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">┗</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">index.ts</span></span>
<span class="line"><span style="color: #50FA7B">┃</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">┗</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">README.md</span></span>
<span class="line"><span style="color: #50FA7B">┗</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">vue/</span><span style="color: #F8F8F2">           </span><span style="color: #6272A4"># 打包测试项目整体入口模块</span></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #50FA7B">┣</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">src/</span></span>
<span class="line"><span style="color: #50FA7B">┃</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">┃</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">┗</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">index.ts</span></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #50FA7B">┗</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">README.md</span></span>
<span class="line"></span></code></pre>
<h4 id="安装typescript">安装Typescript</h4>
<pre is:raw="" class="astro-code dracula" style="background-color: #282A36; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #F8F8F2"></span></span>
<span class="line"><span style="color: #F8F8F2"> pnpm install typescript</span></span>
<span class="line"><span style="color: #F8F8F2"></span></span>
<span class="line"><span style="color: #F8F8F2"> tsc --init # 生成配置文件</span></span>
<span class="line"><span style="color: #F8F8F2"></span></span></code></pre>
<pre is:raw="" class="astro-code dracula" style="background-color: #282A36; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #F8F8F2">{</span></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #50FA7B">//</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">编辑器配置</span></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #50FA7B">"compilerOptions"</span><span style="color: #8BE9FD">:</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">{</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #50FA7B">//</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">根目录</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #50FA7B">"rootDir"</span><span style="color: #8BE9FD">:</span><span style="color: #F8F8F2"> </span><span style="color: #E9F284">"</span><span style="color: #F1FA8C">.</span><span style="color: #E9F284">"</span><span style="color: #F1FA8C">,</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #50FA7B">//</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">严格模式标志</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #50FA7B">"strict"</span><span style="color: #8BE9FD">:</span><span style="color: #F8F8F2"> </span><span style="color: #BD93F9">true</span><span style="color: #F1FA8C">,</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #50FA7B">//</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">指定类型脚本如何从给定的模块说明符查找文件。</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #50FA7B">"moduleResolution"</span><span style="color: #8BE9FD">:</span><span style="color: #F8F8F2"> </span><span style="color: #E9F284">"</span><span style="color: #F1FA8C">node</span><span style="color: #E9F284">"</span><span style="color: #F1FA8C">,</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #50FA7B">//</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">https://www.typescriptlang.org/tsconfig#esModuleInterop</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #50FA7B">"esModuleInterop"</span><span style="color: #8BE9FD">:</span><span style="color: #F8F8F2"> </span><span style="color: #BD93F9">true</span><span style="color: #F1FA8C">,</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #50FA7B">//</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">JS</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">语言版本</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #50FA7B">"target"</span><span style="color: #8BE9FD">:</span><span style="color: #F8F8F2"> </span><span style="color: #E9F284">"</span><span style="color: #F1FA8C">es5</span><span style="color: #E9F284">"</span><span style="color: #F1FA8C">,</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #50FA7B">//</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">允许未读取局部变量</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #50FA7B">"noUnusedLocals"</span><span style="color: #8BE9FD">:</span><span style="color: #F8F8F2"> </span><span style="color: #BD93F9">false</span><span style="color: #F1FA8C">,</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #50FA7B">//</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">允许未读取的参数</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #50FA7B">"noUnusedParameters"</span><span style="color: #8BE9FD">:</span><span style="color: #F8F8F2"> </span><span style="color: #BD93F9">false</span><span style="color: #F1FA8C">,</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #50FA7B">//</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">允许解析</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">json</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #50FA7B">"resolveJsonModule"</span><span style="color: #8BE9FD">:</span><span style="color: #F8F8F2"> </span><span style="color: #BD93F9">true</span><span style="color: #F1FA8C">,</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #50FA7B">//</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">支持语法迭代：https://www.typescriptlang.org/tsconfig#downlevelIteration</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #50FA7B">"downlevelIteration"</span><span style="color: #8BE9FD">:</span><span style="color: #F8F8F2"> </span><span style="color: #BD93F9">true</span><span style="color: #F1FA8C">,</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #50FA7B">//</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">允许使用隐式的</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">any</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">类型（这样有助于我们简化</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">ts</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">的复杂度，从而更加专注于逻辑本身）</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #50FA7B">"noImplicitAny"</span><span style="color: #8BE9FD">:</span><span style="color: #F8F8F2"> </span><span style="color: #BD93F9">false</span><span style="color: #F1FA8C">,</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #50FA7B">//</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">模块化</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #50FA7B">"module"</span><span style="color: #8BE9FD">:</span><span style="color: #F8F8F2"> </span><span style="color: #E9F284">"</span><span style="color: #F1FA8C">esnext</span><span style="color: #E9F284">"</span><span style="color: #F1FA8C">,</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #50FA7B">//</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">转换为</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">JavaScript</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">时从</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">TypeScript</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">文件中删除所有注释。</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #50FA7B">"removeComments"</span><span style="color: #8BE9FD">:</span><span style="color: #F8F8F2"> </span><span style="color: #BD93F9">false</span><span style="color: #F1FA8C">,</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #50FA7B">//</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">禁用</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">sourceMap</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #50FA7B">"sourceMap"</span><span style="color: #8BE9FD">:</span><span style="color: #F8F8F2"> </span><span style="color: #BD93F9">false</span><span style="color: #F1FA8C">,</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #50FA7B">//</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">https://www.typescriptlang.org/tsconfig#lib</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #50FA7B">"lib"</span><span style="color: #8BE9FD">:</span><span style="color: #F8F8F2"> [</span><span style="color: #E9F284">"</span><span style="color: #F1FA8C">esnext</span><span style="color: #E9F284">"</span><span style="color: #F8F8F2">, </span><span style="color: #E9F284">"</span><span style="color: #F1FA8C">dom</span><span style="color: #E9F284">"</span><span style="color: #F1FA8C">],</span></span>
<span class="line"><span style="color: #F8F8F2">  },</span></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #50FA7B">//</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">入口</span></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #50FA7B">"include"</span><span style="color: #8BE9FD">:</span><span style="color: #F8F8F2"> [</span><span style="color: #E9F284">"</span><span style="color: #F1FA8C">packages/*/src</span><span style="color: #E9F284">"</span><span style="color: #F8F8F2">]</span></span>
<span class="line"><span style="color: #F8F8F2">}</span></span></code></pre>
<h3 id="安装rollup-打包工具">安装rollup 打包工具</h3>
<pre is:raw="" class="astro-code dracula" style="background-color: #282A36; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #50FA7B">pnpm</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">install</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">rollup</span></span>
<span class="line"></span>
<span class="line"><span style="color: #50FA7B">pnpm</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">install</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">@rollup/plugin-node-resolve</span><span style="color: #F8F8F2"> </span><span style="color: #6272A4"># 模块导入路径补全</span></span>
<span class="line"></span>
<span class="line"><span style="color: #50FA7B">pnpm</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">install</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">@rollup/plugin-commonjs</span><span style="color: #F8F8F2"> </span><span style="color: #6272A4"># 将代码引用转换为 es2015</span></span>
<span class="line"></span>
<span class="line"><span style="color: #50FA7B">pnpm</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">install</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">@rollup/plugin-typescript</span><span style="color: #F8F8F2"> </span><span style="color: #6272A4"># ts 支持</span></span>
<span class="line"></span>
<span class="line"><span style="color: #50FA7B">pnpm</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">install</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">tslib</span><span style="color: #F8F8F2"> </span></span></code></pre>
<pre is:raw="" class="astro-code dracula" style="background-color: #282A36; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #F8F8F2"></span></span>
<span class="line"><span style="color: #F8F8F2">import resolve from '@rollup/plugin-node-resolve'</span></span>
<span class="line"><span style="color: #F8F8F2">import commonjs from '@rollup/plugin-commonjs'</span></span>
<span class="line"><span style="color: #F8F8F2">import typescript from '@rollup/plugin-typescript'</span></span>
<span class="line"><span style="color: #F8F8F2"></span></span>
<span class="line"><span style="color: #F8F8F2">// rollup的配置文件</span></span>
<span class="line"><span style="color: #F8F8F2">export default [</span></span>
<span class="line"><span style="color: #F8F8F2">  {</span></span>
<span class="line"><span style="color: #F8F8F2">    // 入口文件</span></span>
<span class="line"><span style="color: #F8F8F2">    input: 'packages/vue/src/index.ts',</span></span>
<span class="line"><span style="color: #F8F8F2">    // 打包的输出文件</span></span>
<span class="line"><span style="color: #F8F8F2">    output: [</span></span>
<span class="line"><span style="color: #F8F8F2">      {</span></span>
<span class="line"><span style="color: #F8F8F2">        // 开启sourcemap</span></span>
<span class="line"><span style="color: #F8F8F2">        sourcemap: true,</span></span>
<span class="line"><span style="color: #F8F8F2">        file: 'packages/vue/dist/vue.js',</span></span>
<span class="line"><span style="color: #F8F8F2">        format: 'iife',</span></span>
<span class="line"><span style="color: #F8F8F2">        name: 'Vue'</span></span>
<span class="line"><span style="color: #F8F8F2">      }</span></span>
<span class="line"><span style="color: #F8F8F2">    ],</span></span>
<span class="line"><span style="color: #F8F8F2">    plugins: [</span></span>
<span class="line"><span style="color: #F8F8F2">      // ts 支持</span></span>
<span class="line"><span style="color: #F8F8F2">      typescript({</span></span>
<span class="line"><span style="color: #F8F8F2">        sourceMap: true</span></span>
<span class="line"><span style="color: #F8F8F2">      }),</span></span>
<span class="line"><span style="color: #F8F8F2">      // 模块导入路径补全</span></span>
<span class="line"><span style="color: #F8F8F2">      resolve(),</span></span>
<span class="line"><span style="color: #F8F8F2">      // commonjs 模块转换成 es2015</span></span>
<span class="line"><span style="color: #F8F8F2">      commonjs()</span></span>
<span class="line"><span style="color: #F8F8F2">    ]</span></span>
<span class="line"><span style="color: #F8F8F2">  }</span></span>
<span class="line"><span style="color: #F8F8F2">]</span></span>
<span class="line"><span style="color: #F8F8F2"></span></span>
<span class="line"><span style="color: #F8F8F2"></span></span></code></pre>
<p>在package.json文件中新加一个scripts</p>
<pre is:raw="" class="astro-code dracula" style="background-color: #282A36; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #F8F8F2">    "build":"rollup -c -w"</span></span></code></pre>
<p>如果出现以下这样证明成功了</p>
<p><img src="http://img.blog.loli.wang/2023-8-25-vuemini1/02.png" alt="rollup打包成功"></p>
<p>项目的雏形，一个标准的monorepo项目。</p></div></div><div class="flex justify-center mt-4"><div class="container bg-white dark:bg-darkBg2 dark:text-white shadow rounded-md p-4  text-center text-block hover:text-sky-300 transition ease-in-out delay duration-300"><div class="23"><a href="/" title="魔王の博客">魔王の博客 - Welcome to my website! - © 2023 YOUR NAME HERE.</a></div></div></div><div class="fixed bottom-4 right-4"><div id="darkToggle" class="rounded-full bg-white w-[40px] h-[40px] flex justify-center items-center text-sky-400 dark:bg-darkBg2 dark:text-sky-600 shadow-xl"><i id="darkIcon" class="iconfont blog-taiyang" style="font-size: 30px;"></i></div><div id="toggleF11" class="rounded-full bg-white w-[40px] h-[40px] flex justify-center items-center text-sky-400 dark:bg-darkBg2 dark:text-sky-600 shadow-xl mt-2"><svg class="icon svg-icon" aria-hidden="true"><use xlink:href="#blog-tiantianquan-01"></use></svg></div></div></div></div></body></html>